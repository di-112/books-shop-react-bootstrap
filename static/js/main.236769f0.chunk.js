(this["webpackJsonpweb-shop"]=this["webpackJsonpweb-shop"]||[]).push([[0],{67:function(e,t,c){},69:function(e,t,c){},95:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),o=c(20),a=c.n(o),r=(c(67),c(22)),i=c(28),l=c.n(i),j=c(32),b=c(2),u=(c(69),c(7)),h=c(9),d=c(101),O=c(46),x=c(34),m=c(8),k=c(58),f={getBooks:function(){return k.get("https://web-shop-fd168-default-rtdb.firebaseio.com/books.json").then((function(e){return e.data}))}},p=new function e(){var t=this;Object(x.a)(this,e),this.books=[],this.isLoading=!1,this.alert={},this.setBooks=Object(j.a)(l.a.mark((function e(){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,t.alert=!1,e.next=4,f.getBooks();case 4:c=e.sent,t.books=c||t.books,t.isLoading=!1;case 7:case"end":return e.stop()}}),e)}))),this.sortPriceDown=function(){t.isLoading=!0,f.getBooks().then((function(e){t.books=Object(O.a)(e).sort((function(e,t){return t.price-e.price}))||t.books,t.isLoading=!1}))},this.sortPriceUp=function(){t.isLoading=!0,f.getBooks().then((function(e){t.books=Object(O.a)(e).sort((function(e,t){return e.price-t.price}))||t.books,t.isLoading=!1}))},this.searchBook=function(e){t.isLoading=!0,f.getBooks().then((function(c){var n=!1,s=[];c.forEach((function(t){t.title.toLowerCase().includes(e.toLowerCase())&&(s.push(t),n=!0)})),n&&(t.books=s),n||(t.alert={type:"danger",show:!0}),t.isLoading=!1}))},this.changeAlert=function(e){t.alert=e},Object(m.d)(this)},g=new function e(){var t=this;Object(x.a)(this,e),this.choosenBooks=[],this.allPrice=0,this.summa=function(e){return e.reduce((function(e,t){return e+t.price*t.count}),0)},this.addBook=function(e){t.choosenBooks=t.choosenBooks.concat([Object(b.a)(Object(b.a)({},e),{},{count:1})]),t.allPrice=t.summa(t.choosenBooks)},this.removeBook=function(e){t.choosenBooks=t.choosenBooks.filter((function(t){return t.title!==e.title})),t.allPrice=t.summa(t.choosenBooks)},this.incrementCountBook=function(e){t.choosenBooks.map((function(e){return e.title})).includes(e.title)&&(t.choosenBooks=t.choosenBooks.map((function(t){return t.title===e.title?Object(b.a)(Object(b.a)({},t),{},{count:t.count+1}):t})),t.allPrice=t.summa(t.choosenBooks))},this.decrementCountBook=function(e){t.choosenBooks.map((function(e){return e.title})).includes(e.title)&&(t.choosenBooks=t.choosenBooks.map((function(t){return t.title===e.title&&t.count>1?Object(b.a)(Object(b.a)({},t),{},{count:t.count-1}):t})),t.allPrice=t.summa(t.choosenBooks))},Object(m.d)(this)},v=c(12),B=c(102),N=c(97),w=c(1),C=function(e){var t=e.searchBook,c=Object(n.useState)(null),s=Object(v.a)(c,2),o=s[0],a=s[1];return Object(w.jsxs)("div",{className:"d-flex ",children:[Object(w.jsx)(B.a,{value:o,onChange:function(e){return a(e.currentTarget.value)},className:"mr-3",placeholder:"Edit book..."}),Object(w.jsx)(N.a,{onClick:function(){return t(o)},variant:"success",children:" Search"})]})},_=c.p+"static/media/logo.4950ce18.png",y=Object(h.a)((function(){var e=Object(b.a)(Object(b.a)({},p),g),t=e.setBooks,c=e.searchBook,s=e.choosenBooks,o=Object(n.useMemo)((function(){return s.reduce((function(e,t){return e+t.count}),0)}),[s]);return Object(w.jsx)("header",{className:"header navbar navbar-expand-lg py-2 px-3 bg-light",children:Object(w.jsxs)("div",{className:"header__menu collapse navbar-collapse",children:[Object(w.jsxs)(d.a,{className:"header__links mr-auto mb-2",children:[Object(w.jsx)(d.a.Item,{children:Object(w.jsx)(d.a.Link,{as:"img",src:_,className:"logo",alt:"",to:"/home",exact:!0,onClick:t})}),Object(w.jsx)(d.a.Item,{children:Object(w.jsx)(d.a.Link,{as:r.b,to:"/home",exact:!0,onClick:t,children:" Home "})}),Object(w.jsx)(d.a.Item,{children:Object(w.jsx)(d.a.Link,{as:r.b,to:"/cart",exact:!0,onClick:t,children:" Cart "})})]}),Object(w.jsxs)("div",{className:"d-flex",children:[Object(w.jsxs)(r.b,{to:"/cart",className:"cartIcon",children:[Object(w.jsx)("img",{title:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430",src:"https://baden-shop.ru/images/basket.png",alt:""}),!!s.length&&Object(w.jsx)("span",{children:o})]}),Object(w.jsx)(C,{searchBook:c})]})]})})})),L=c(98),P=c(99),I=function(){return Object(w.jsx)(L.a,{fluid:"xxl",className:"spinner-wrapper",children:Object(w.jsx)(P.a,{animation:"border",variant:"primary",role:"status",children:Object(w.jsx)("span",{className:"visually-hidden"})})})},D=Object(h.a)((function(e){var t=e.book,c=g.removeBook,n=g.incrementCountBook,s=g.decrementCountBook;return Object(w.jsx)("div",{children:Object(w.jsxs)("div",{className:"cart__book",children:[Object(w.jsx)("img",{src:t.image,alt:"",className:"book__img"}),Object(w.jsx)("span",{className:"book__title",children:t.title}),Object(w.jsxs)("div",{className:"book_count",children:[Object(w.jsx)("button",{className:"btn btn-danger",disabled:1===t.count,onClick:function(e){e.preventDefault(),s(t)},children:"-"}),Object(w.jsxs)("span",{className:"",children:[" ",t.count," ","\u0448\u0442."," "]}),Object(w.jsx)("button",{className:"btn btn-success",onClick:function(e){e.preventDefault(),n(t)},children:"+"})]}),Object(w.jsxs)("span",{className:"book__price",children:[t.price," ","\u0440\u0443\u0431."]}),Object(w.jsx)("button",{className:"btn btn-danger",onClick:function(e){e.preventDefault(),c(t)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})},t.title)})),E=Object(h.a)((function(){var e=g.choosenBooks,t=g.allPrice;return Object(w.jsx)("div",{className:"cart container-xl",children:e.length?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("ul",{children:e.map((function(e){return Object(w.jsx)("li",{children:Object(w.jsx)(D,{book:e})})}))}),Object(w.jsxs)("div",{className:"cart__price",children:["\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430:",Object(w.jsx)("span",{children:"".concat(t," \u0440\u0443\u0431\u043b\u0435\u0439")}),Object(w.jsx)("a",{className:"btn btn-success",href:"https://qiwi.com/",target:"_blank",rel:"noreferrer",children:"\u041a\u0443\u043f\u0438\u0442\u044c"})]})]}):Object(w.jsxs)("div",{className:"cartEmpty",children:[Object(w.jsx)("p",{className:"text-center",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"}),Object(w.jsx)(r.b,{to:"/",exact:!0,type:"button",className:"btn btn-danger",children:"\u041d\u0430\u0437\u0430\u0434"})]})})})),A=c(100),M=Object(h.a)((function(){var e=p.alert,t=p.changeAlert,c="";switch(e.type){case"danger":c="\u041a\u043d\u0438\u0433\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430";break;case"success":c="\u041a\u043d\u0438\u0433\u0430 \u043d\u0430\u0439\u0434\u0435\u043d\u0430";break;case"warning":c="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"}return Object(w.jsxs)(A.a,{variant:e.type,onClose:function(){return t({show:!1,type:""})},dismissible:!0,children:[Object(w.jsx)(A.a.Heading,{children:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435"}),Object(w.jsx)("p",{children:c})]})})),S=Object(h.a)((function(){var e=p.setBooks,t=p.sortPriceDown,c=p.sortPriceUp;return Object(w.jsxs)("div",{className:"ml-5 d-flex",children:[Object(w.jsx)(N.a,{variant:"secondary",onClick:t,children:"\u0426\u0435\u043d\u0430 \u2193"}),Object(w.jsx)(N.a,{variant:"secondary",className:"mx-3 rounded",onClick:c,children:"\u0426\u0435\u043d\u0430 \u2191"}),Object(w.jsx)(N.a,{variant:"secondary",onClick:e,children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})]})})),F=c(103),H=c(104),J=Object(h.a)((function(e){var t=e.book,c=g.addBook,s=g.choosenBooks,o=g.removeBook,a=t.image,r=t.title,i=t.author,l=t.price,j=t.rating,b=Object(n.useMemo)((function(){return s.map((function(e){return e.title}))}),[s]);return Object(w.jsxs)(F.a,{className:"book",children:[Object(w.jsx)(F.a.Img,{src:a,className:"book__img",alt:r}),Object(w.jsxs)(F.a.Body,{className:"book__body",children:[Object(w.jsx)(F.a.Title,{children:r}),Object(w.jsxs)(H.a,{variant:"flush",className:"text-left",children:[Object(w.jsxs)(H.a.Item,{children:[Object(w.jsx)("strong",{children:" \u0410\u0432\u0442\u043e\u0440: "}),Object(w.jsx)("span",{children:i})]}),Object(w.jsxs)(H.a.Item,{children:[Object(w.jsx)("strong",{children:"\u0426\u0435\u043d\u0430: "}),Object(w.jsx)("span",{children:"".concat(l," \u0440\u0443\u0431.")})]}),Object(w.jsxs)(H.a.Item,{children:[Object(w.jsx)("strong",{children:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: "}),Object(w.jsx)("span",{children:"".concat(j,"/5")})]})]}),Object(w.jsx)("div",{className:"d-flex flex-column h-100 justify-content-end",children:b.includes(r)?Object(w.jsx)(N.a,{onClick:function(){return o(t)},variant:"danger",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}):Object(w.jsx)(N.a,{onClick:function(){return c(t)},variant:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})]})})),T=Object(h.a)((function(){var e=p.books,t=p.setBooks;return 1===e.length?Object(w.jsxs)(L.a,{fluid:"xl",className:"d-flex flex-column align-items-center",children:[e.map((function(e){return Object(w.jsx)(J,{book:e},e.title)})),Object(w.jsx)(N.a,{variant:"danger",className:"mt-4",onClick:t,children:"\u041d\u0430\u0437\u0430\u0434"})]}):Object(w.jsxs)(L.a,{fluid:"xl",children:[Object(w.jsx)(S,{}),Object(w.jsx)("div",{className:"books",children:e&&e.map((function(e){return Object(w.jsx)(J,{book:e},e.title)}))})]})})),U=Object(h.a)((function(){return p.alert.show?Object(w.jsx)(M,{}):Object(w.jsx)(T,{})})),q=Object(h.a)((function(){var e=Object(b.a)(Object(b.a)({},p),g),t=e.isLoading,c=e.setBooks;return Object(n.useEffect)(Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:case"end":return e.stop()}}),e)}))),[]),Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(u.a,{to:"/home"}),Object(w.jsx)(y,{}),t?Object(w.jsx)(I,{}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(u.b,{path:"/home",exact:!0,render:function(){return Object(w.jsx)(U,{})}}),Object(w.jsx)(u.b,{path:"/cart",exact:!0,render:function(){return Object(w.jsx)(E,{})}})]})]})}));a.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(r.a,{children:Object(w.jsx)(q,{})})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.236769f0.chunk.js.map